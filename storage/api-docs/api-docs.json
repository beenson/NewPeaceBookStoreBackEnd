{
    "openapi": "3.0.0",
    "info": {
        "title": "NewPeace BookStore API",
        "version": "1.0"
    },
    "paths": {
        "/api/auth/login": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "會員登入",
                "operationId": "8dcb70df1020986038d098cc08d05dae",
                "parameters": [
                    {
                        "name": "email",
                        "in": "query",
                        "description": "信箱",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "password",
                        "in": "query",
                        "description": "密碼",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "登入成功",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 0,
                                    "token": "aabbcc"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "登入失敗",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 0,
                                    "message": "invalid credentials"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "失敗(請求格式錯誤)",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 0,
                                    "message": "bad request"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/auth/register": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "會員註冊",
                "operationId": "d764dd091cc4494ae0baf360b03319f3",
                "parameters": [
                    {
                        "name": "email",
                        "in": "query",
                        "description": "信箱",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "password",
                        "in": "query",
                        "description": "密碼",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "name",
                        "in": "query",
                        "description": "名稱",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "sid",
                        "in": "query",
                        "description": "學號",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "註冊成功",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 1,
                                    "token": "aabbcc"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "失敗(重複註冊)",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 0,
                                    "message": "duplicate user"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "失敗(請求格式錯誤)",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 0,
                                    "message": "bad request"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/auth/": {
            "get": {
                "tags": [
                    "Auth"
                ],
                "summary": "取得登入資訊",
                "operationId": "98782e40ab294752958a37adbadd0a5d",
                "responses": {
                    "200": {
                        "description": "成功",
                        "content": {
                            "application/json": {
                                "example": {
                                    "id": 3,
                                    "name": "3",
                                    "email": "3",
                                    "role": 0,
                                    "sid": "3",
                                    "remember_token": null,
                                    "created_at": "2021-11-12T15:15:10.000000Z",
                                    "updated_at": "2021-11-12T15:15:10.000000Z"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "失敗(Token錯誤)",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 0,
                                    "message": "Unauthorized"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/auth/logout": {
            "get": {
                "tags": [
                    "Auth"
                ],
                "summary": "登出",
                "operationId": "a8dd056be3e98a38c657f73ed6cdef2d",
                "responses": {
                    "200": {
                        "description": "成功",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 1
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/auth/bindPhone": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "綁定手機",
                "operationId": "cb54454c80430135089554abb6e254bb",
                "parameters": [
                    {
                        "name": "phone",
                        "in": "query",
                        "description": "手機號碼",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "成功",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 1
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "失敗(已綁定手機)",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 0,
                                    "message": "already bind phone"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "失敗(手機號碼錯誤)",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 0,
                                    "message": "phone format error"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/auth/verifyPhone": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "驗證手機",
                "operationId": "2ecc089d9963d342bb6b4190ce47fcdc",
                "parameters": [
                    {
                        "name": "phone",
                        "in": "query",
                        "description": "驗證碼",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "成功",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 1
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "失敗(未綁定手機)",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 0,
                                    "message": "not bind phone yet"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "失敗(已驗證成功)",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 0,
                                    "message": "had verify phone"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "失敗(驗證碼錯誤)",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 0,
                                    "message": "error code"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/auth/orders": {
            "get": {
                "tags": [
                    "Order"
                ],
                "summary": "訂單紀錄",
                "operationId": "3d52aa29e9a87a39614334e40d3c5050",
                "responses": {
                    "200": {
                        "description": "成功",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 1,
                                    "data": [
                                        {
                                            "id": 1,
                                            "user_id": 1,
                                            "status": 1,
                                            "total_price": 100,
                                            "created_at": null,
                                            "updated_at": null
                                        }
                                    ]
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/auth/order/{oid}": {
            "get": {
                "tags": [
                    "Order"
                ],
                "summary": "指定訂單紀錄",
                "operationId": "da3603393acb2be073300b7780dca010",
                "responses": {
                    "200": {
                        "description": "成功",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 1,
                                    "data": {
                                        "id": 1,
                                        "user_id": 1,
                                        "status": 1,
                                        "total_price": 100,
                                        "created_at": null,
                                        "updated_at": null
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "失敗(訂單不存在)",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 0,
                                    "message": "order not found"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "失敗(訂單不屬於此會員)",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 0,
                                    "message": "order not found"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/user/{id}/orders": {
            "get": {
                "tags": [
                    "Order"
                ],
                "summary": "會員訂單紀錄",
                "operationId": "9d7b1a365d25e8b27db78493c077717e",
                "responses": {
                    "200": {
                        "description": "成功",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 1,
                                    "data": [
                                        {
                                            "id": 1,
                                            "user_id": 1,
                                            "status": 1,
                                            "total_price": 100,
                                            "created_at": null,
                                            "updated_at": null
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "失敗(會員不存在)",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 0,
                                    "message": "user not found"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/user/{id}/order/{oid}": {
            "get": {
                "tags": [
                    "Order"
                ],
                "summary": "會員指定訂單紀錄",
                "operationId": "c1fb86604b998588ddb0a25d88888162",
                "responses": {
                    "200": {
                        "description": "成功",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 1,
                                    "data": {
                                        "id": 1,
                                        "user_id": 1,
                                        "status": 1,
                                        "total_price": 100,
                                        "created_at": null,
                                        "updated_at": null
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "失敗(訂單不存在)",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 0,
                                    "message": "order not found"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "失敗(訂單不屬於此會員)",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 0,
                                    "message": "order not belongs this user"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/user": {
            "get": {
                "tags": [
                    "User"
                ],
                "summary": "使用者列表",
                "operationId": "dcfdce57c12b8790024f232a8d3d6e1e",
                "responses": {
                    "200": {
                        "description": "成功",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 1,
                                    "data": [
                                        {
                                            "id": 1,
                                            "name": "1",
                                            "email": "1",
                                            "role": 0,
                                            "sid": "3",
                                            "remember_token": null,
                                            "created_at": "2021-11-12T15:15:10.000000Z",
                                            "updated_at": "2021-11-12T15:15:10.000000Z"
                                        },
                                        {
                                            "id": 3,
                                            "name": "3",
                                            "email": "3",
                                            "role": 0,
                                            "sid": "3",
                                            "remember_token": null,
                                            "created_at": "2021-11-12T15:15:10.000000Z",
                                            "updated_at": "2021-11-12T15:15:10.000000Z"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "User"
                ],
                "summary": "添加會員",
                "operationId": "d09e58c211474a2ec5066f0cf6330a11",
                "parameters": [
                    {
                        "name": "email",
                        "in": "query",
                        "description": "信箱",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "password",
                        "in": "query",
                        "description": "密碼",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "name",
                        "in": "query",
                        "description": "名稱",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "sid",
                        "in": "query",
                        "description": "學號",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "新增成功",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 1,
                                    "data": {
                                        "id": 1,
                                        "name": "1",
                                        "email": "1",
                                        "role": 0,
                                        "sid": "3",
                                        "remember_token": null,
                                        "created_at": "2021-11-12T15:15:10.000000Z",
                                        "updated_at": "2021-11-12T15:15:10.000000Z"
                                    }
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "失敗(使用者重複)",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 0,
                                    "message": "duplicate user"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "失敗(請求格式錯誤)",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 0,
                                    "message": "bad request"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/user/{id}": {
            "get": {
                "tags": [
                    "User"
                ],
                "summary": "使用者資訊",
                "operationId": "8569f7c74e0c86a024a969c8691d3ed1",
                "responses": {
                    "200": {
                        "description": "成功",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 1,
                                    "data": {
                                        "id": 1,
                                        "name": "1",
                                        "email": "1",
                                        "role": 0,
                                        "sid": "3",
                                        "remember_token": null,
                                        "created_at": "2021-11-12T15:15:10.000000Z",
                                        "updated_at": "2021-11-12T15:15:10.000000Z"
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "失敗(不存在)",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 0,
                                    "message": "user not found"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "User"
                ],
                "summary": "修改會員資訊",
                "operationId": "0c3a70ac5b05d1923ee03be654c0c639",
                "parameters": [
                    {
                        "name": "password",
                        "in": "query",
                        "description": "密碼",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "name",
                        "in": "query",
                        "description": "名稱",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "role",
                        "in": "query",
                        "description": "權限",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "修改成功",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 1,
                                    "data": {
                                        "id": 1,
                                        "name": "1",
                                        "email": "1",
                                        "role": 0,
                                        "sid": "3",
                                        "remember_token": null,
                                        "created_at": "2021-11-12T15:15:10.000000Z",
                                        "updated_at": "2021-11-12T15:15:10.000000Z"
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "失敗(會員不存在)",
                        "content": {
                            "application/json": {
                                "example": {
                                    "status": 0,
                                    "message": "user not found"
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "security": [
        []
    ]
}